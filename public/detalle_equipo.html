<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Detalle Equipo - ColdChain</title>
  <link href="favicon.ico" rel="icon" type="image/x-icon">
  <link href="assets/images/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
  <link href="assets/images/android-chrome-192x192.png" rel="icon" sizes="192x192" type="image/png">
  <link href="assets/images/android-chrome-512x512.png" rel="icon" sizes="512x512" type="image/png">
  <link href="assets/styles/styles.css" rel="stylesheet"/>
  <link href="assets/styles/Pie.css" rel="stylesheet"/>
  <link href="assets/styles/pages.css" rel="stylesheet"/>
  <link href="assets/styles/dashboard.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link
    href="https://fonts.googleapis.com/css2?family=Marcellus+SC&family=Ruluko&family=Ysabeau+Office:ital,wght@0,1..1000;1,1..1000&display=swap"
    rel="stylesheet"
  />
</head>
<body>
<header class="encabezado-principal">
  <nav class="barra-navegacion">
    <a class="logo" href="ColdChain.html">
      <img alt="Logo ColdChain" src="assets/images/Coldchain.png"/>
      <span>ColdChain</span>
    </a>
    <div class="iconos-header-dashboard">
      <!-- Bot√≥n Usuario (Va a perfil2.html como pediste antes) -->
      <a class="btn-usuario-header" href="perfil2.html" title="Perfil">
        <img alt="Usuario" src="assets/images/userblack.png"/>
      </a>

      <!-- Bot√≥n Men√∫ Hamburguesa -->
      <button class="btn-menu-hamburguesa" onclick="toggleMenu()">
        <img alt="Men√∫" src="assets/images/menublack.png"/>
      </button>
    </div>
  </nav>
</header>

<!-- MEN√ö LATERAL (FALTABA ESTO PARA QUE FUNCIONE) -->
<div class="menu-lateral" id="sideMenu">
  <div class="cabecera-menu">
    <h3>Men√∫</h3>
    <button class="btn-cerrar" onclick="toggleMenu()">&times;</button>
  </div>
  <ul class="lista-menu-lateral">
    <li>
      <a href="index2.html#inicio"
      ><img src="assets/images/inicio.png" width="20"/> Inicio</a
      >
    </li>
    <li>
      <a href="index2.html#solucion"
      ><img src="assets/images/solucion.png" width="20"/> Soluci√≥n</a
      >
    </li>
    <li>
      <a href="index2.html#beneficios"
      ><img src="assets/images/beneficios.png" width="20"/> Beneficios</a
      >
    </li>
    <li>
      <a href="index2.html#equipo"
      ><img src="assets/images/equipo.png" width="20"/> Equipo</a
      >
    </li>
    <li>
      <a href="index2.html#precios"
      ><img src="assets/images/precio.png" width="20"/> Precios</a
      >
    </li>
    <li>
      <a href="index2.html#app-movil"
      ><img src="assets/images/appmovilblack.png" width="20"/> App Movil</a
      >
    </li>
    <li>
      <a href="index2.html#contacto"
      ><img src="assets/images/phone black.png" width="20"/> Contacto</a
      >
    </li>
  </ul>
</div>
<div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>

<main style="background-color: #fcfcfc">
  <section class="contenedor dashboard-section">
    <!-- Encabezado Detalle -->
    <div class="detalle-header-top">
      <div class="grupo-titulo-volver">
        <a class="btn-volver-tarjeta" href="monitoreo.html">‚ùÆ Monitor</a>
        <div class="info-titulo-separador">
          <h1 class="titulo-detalle" id="det-nombre">Cargando...</h1>
          <p class="ubicacion-detalle">
            <img src="assets/images/geo.png" width="14"/>
            <span id="det-ubi">...</span>
          </p>
        </div>
      </div>
      <a class="boton btn-negro" href="#" id="btn-ir-reporte"
      >Generar Reporte</a
      >
    </div>

    <!-- Banner Estado -->
    <div class="banner-estado" id="banner-estado">
      <div class="estado-titulo">
            <span
            ><img src="assets/images/notificacion.png" width="15"/> Estado
              Actual</span
            >
        <span class="badge" id="badge-estado">Analizando...</span>
      </div>
      <div class="grid-estado-datos">
        <div class="dato-box">
          <span class="label">Temperatura Actual</span>
          <span class="valor grande" id="det-temp">--</span>
        </div>
        <div class="dato-box">
          <span class="label">Temperatura Objetivo</span>
          <span class="valor grande" id="det-obj">--</span>
        </div>
        <div class="dato-box">
          <span class="label">Desviaci√≥n</span>
          <span class="valor grande" id="det-dev">--</span>
        </div>
        <!-- Fecha con ID para colorear -->
        <div class="dato-box info-small" id="box-fecha-update">
          <span class="label">√öltima Actualizaci√≥n</span>
          <span id="det-update">--</span>
        </div>
      </div>
    </div>

    <!-- Gr√°fico y Eventos -->
    <div class="layout-detalle-grid">
      <div class="tarjeta-blanca grafico-section">
        <div class="titulo-grafico">
          <img src="assets/images/graficos.png" width="24"/>
          <h2>Historial de Temperatura (24h)</h2>
        </div>
        <p class="subtitulo-grafico">
          Gr√°fico de tendencia con temperatura objetivo
        </p>

        <div class="canvas-container">
          <canvas id="tempChart"></canvas>
        </div>

        <div class="contenedor-boton-share">
          <button class="boton btn-olvide" onclick="abrirModalCompartir()">
            Compartir Reporte
          </button>
        </div>
      </div>

      <div class="tarjeta-blanca eventos-section">
        <div class="titulo-grafico">
          <img src="assets/images/notificacion.png" width="24"/>
          <h2>Eventos Recientes</h2>
        </div>
        <p class="subtitulo-grafico">Registro de alertas del equipo</p>
        <!-- Timeline llenado por JS -->
        <div class="timeline"></div>
      </div>
    </div>

    <!-- Historial de Reportes -->
    <div
      class="tarjeta-blanca fade-in-up delay-2"
      id="historial"
      style="margin-bottom: 2rem"
    >
      <div class="titulo-grafico">
        <img src="assets/images/historial.png" width="24"/>
        <h2>Historial de Reportes Generados</h2>
      </div>
      <p class="subtitulo-grafico">
        Accede a los reportes anteriores generados para este equipo.
      </p>

      <table class="tabla-historial">
        <thead>
        <tr>
          <th>Nombre del Reporte</th>
          <th>Fecha</th>
          <th>Tipo</th>
          <th>Acci√≥n</th>
        </tr>
        </thead>
        <tbody>
        <!-- Llenado por JS -->
        </tbody>
      </table>
    </div>
  </section>
</main>

<!-- MODAL COMPARTIR (ESTRUCTURA CORRECTA) -->
<div class="modal-overlay-share" id="modal-share">
  <div class="modal-content-share">
    <h3>Compartir Reporte</h3>
    <p>Selecciona una plataforma:</p>

    <div class="share-grid">
      <a
        class="btn-social-share fb"
        href="https://www.facebook.com"
        target="_blank"
        title="Compartir en Facebook"
      >
        <img alt="FB" src="assets/images/facebook.png"/>
      </a>

      <a
        class="btn-social-share wa"
        href="https://web.whatsapp.com"
        target="_blank"
        title="Compartir en WhatsApp"
      >
        <img alt="WA" src="assets/images/whatsapp.png"/>
      </a>

      <a
        class="btn-social-share gh"
        href="https://github.com"
        target="_blank"
        title="Ver en GitHub"
      >
        <img alt="GH" src="assets/images/github.png"/>
      </a>
    </div>

    <button class="btn-cerrar-modal" onclick="cerrarModalCompartir()">
      Cancelar
    </button>
  </div>
</div>
<!-- CHATBOT WIDGET -->
<div class="chat-widget" id="chat-widget">
  <div class="chat-header" onclick="toggleChat()">
    <span>Asistente ColdChain</span>
    <span>_</span>
  </div>
  <div class="chat-body" id="chat-body">
    <div class="mensaje bot">Hola, soy tu asistente virtual.</div>
  </div>
  <div class="chat-footer">
    <input
      id="chat-input"
      onkeypress="handleChat(event)"
      placeholder="Escribe..."
      type="text"
    />
    <button onclick="enviarMensaje()">‚û§</button>
  </div>
</div>
<button class="boton-flotante-chat" onclick="toggleChat()">üí¨</button>
<!-- MODAL ELIMINAR REPORTE -->
<div class="modal-overlay-center" id="modal-borrar-reporte">
  <!-- ID ESPEC√çFICO -->
  <div class="modal-confirm-box">
    <h3 style="color: #dc2626">¬øBorrar Reporte?</h3>
    <p>
      El reporte seleccionado se eliminar√° permanentemente del historial.
    </p>
    <div class="acciones-modal">
      <button
        class="btn-modal-cancelar"
        onclick="cerrarModalBorrarReporte()"
      >
        Cancelar
      </button>
      <button class="btn-modal-eliminar" onclick="ejecutarBorrarReporte()">
        Borrar Reporte
      </button>
    </div>
  </div>
</div>
<footer class="pie-de-pagina">
  <div class="contenedor-pie">
    <div class="pie-izquierda">
      <img
        alt="Logo ColdChain"
        class="logo-pie"
        src="assets/images/Coldchain.png"
      />
      <p>¬© 2025 ColdChain. Todos los derechos reservados.</p>
    </div>
    <div class="pie-derecha">
      <a href="assets/Documentos/Terminos%20de%20Servicio.pdf">T√©rminos de Servicio</a>
      <a href="assets/Documentos/Politica%20de%20Privacidad.pdf"
      >Pol√≠tica de Privacidad</a
      >
      <a href="assets/Documentos/Proteccion%20de%20Datos.pdf">Protecci√≥n de Datos</a>
    </div>
  </div>
</footer>

<script src="assets/scripts/script.js"></script>
</body>
</html>
